getsynapsenotionsecret() {
  op item get 'Synapse Notion Internal Integration Secret' --fields credential --reveal
}
getnotiondbprops() {
  curl "https://api.notion.com/v1/databases/$1" \
    -H "Authorization: Bearer $(op item get 'Synapse Notion Internal Integration Secret' --fields credential --reveal)" \
    -H "Notion-Version: 2022-06-28"
}
cpath() {
  if [ -z "$1" ]; then
    # No argument: copy current working directory
    pwd | tr -d '\n' | pbcopy
    echo "Current directory copied to clipboard."
  else
    # Argument provided: resolve absolute path of the file/dir
    if [ -f "$1" ] || [ -d "$1" ]; then
      # Compatible with macOS/Linux without requiring 'realpath'
      echo "$(cd "$(dirname "$1")" && pwd)/$(basename "$1")" | tr -d '\n' | pbcopy
      echo "Path to '$1' copied to clipboard."
    else
      echo "Error: '$1' does not exist."
    fi
  fi
}
syn-local() {
    local url="http://localhost:8080"
    local input_text="$*"

    if [ -z "$input_text" ]; then
        echo "Usage: syn-local <text>"
        return 1
    fi

    echo "ðŸš€ Sending: '$input_text'..."

    local payload
    payload=$(python3 -c "import sys, json, base64; print(json.dumps({'message': {'data': base64.b64encode(sys.argv[1].encode('utf-8')).decode('utf-8'), 'attributes': {}}}))" "$input_text")

    curl -X POST "$url" \
        -H "Content-Type: application/json" \
        -H "Ce-Id: 123456789" \
        -H "Ce-Specversion: 1.0" \
        -H "Ce-Type: google.cloud.pubsub.topic.v1.messagePublished" \
        -H "Ce-Source: //pubsub.googleapis.com/projects/synapse/topics/local" \
        -d "$payload"
    
    echo ""
}
